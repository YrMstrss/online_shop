# Онлайн магазин
Данное веб-приложение представляет собой проект магазина.
Приложение разработано с использованием Django REST framework.

Стек технологий:
* Python 3.12
* Django 5.0.1
* djangorestframework 3.14.0
* PostgreSQL 10+

## Работа с проектом 
1. Установить виртуально окружение командой: `python -m venv env` и установить зависимости:
`pip install -r requirements.txt`
2. Создать базу данных PostreSQL и провести миграции командой: `python manage.py migrate`
3. Переименовать файл '.env-sample' в '.env' и заполнить соответствующие поля
4. Запустить сервер командой `python manage.py runserever`
5. Командой `python manage.py createsuperuser` можно создать суперпользователя для входа в админку.


## О проекте

### Модели
1. Category - модель категории товара. Поля - название, слаг и изображение
2. Subcategory - модель подкатегории. Имеет связь с родительской категорией. Поля - название, слаг и изображение
3. Product - модель товара. Описывает товар - название, цена, изображение, слаг, подкатегорию, к которой относится товар
и, соответственно, категорию.
4. ShoppingCart - модель корзины пользователя. Связана с пользователем. Создается автоматически после регистрации 
пользователя. Имеет поле 'total_sum' - сумма за все товары в корзине.
5. ProductInCart - модель товара в корзине. Связана с корзиной пользователя. Имеет поле 'summ' - сумма за добавленное
количество определенного товара.
6. User - модель пользователя. 

### Админка
Админка позволяет создавать товары, категории и подкатегории, изменять и удалять их. 

### API
Реализован просмотр всех категорий и их подкатегорий, доступный всем пользователям.

Реализованы возможности добавления, удаления и изменения количества товаров в корзине. Доступно только
зарегистрированному и авторизованному пользователю. Корзина, с которой совершаются действия, определяется через
текущего пользователя из request, то есть текущий пользователь не может совершать действия с корзинами других 
пользователей.  


### Эндпоинты 
http://127.0.0.1:8000/category/list/ - просмотр всех категорий и их подкатегорий


http://127.0.0.1:8000/product/list/ - просмотр всех товаров 


http://127.0.0.1:8000/user/register/ - регистрация пользователя

http://127.0.0.1:8000/user/token/ - получение JWT

http://127.0.0.1:8000/user/token/refresh/ - обновление JWT


http://127.0.0.1:8000/cart/add/<slug:slug>/ - добавление 1 единицы товара в корзину, здесь и далее <slug:slug> - слаг 
товара, который добавляется/удаляется в корзину

http://127.0.0.1:8000/cart/remove/<slug:slug>/ - удаление 1 единицы товара из корзины

http://127.0.0.1:8000/cart/clean/ - полная очистка корзины

http://127.0.0.1:8000/cart/delete/<slug:slug>/ - удаление любого количества определенного товара из корзины

http://127.0.0.1:8000/cart/update/<slug:slug>/ - обновление количества товара в корзине
